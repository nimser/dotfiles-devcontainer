#!/bin/bash

set -euo pipefail

# Install pkgx 
if ! command -v pkgx > /dev/null; then
  curl -fsS https://pkgx.sh | sh
fi
# Use pkgm for userland packages not available in Mise
pkgm install git-crypt

# Install and initialize chezmoi in one go
if ! command -v chezmoi > /dev/null; then
  sh -c "$(curl -fsLS get.chezmoi.io)" -- init --apply git@github.com:nimser/private-dotfiles-devcontainer.git
fi

echo "Finished cloning chezmoi"
exit 0
