#!/bin/bash

set -euo pipefail

# Install pkgx 
if ! command -v pkgx > /dev/null; then
  curl -fsS https://pkgx.sh | sh
fi

# Install and initialize chezmoi in one go
if ! command -v chezmoi > /dev/null; then
  sh -c "$(curl -fsLS get.chezmoi.io)" -- init --apply git@github.com:nimser/private-dotfiles-devcontainer.git
fi


# Set up XDG_CONFIG_HOME
export XDG_CONFIG_HOME="$HOME"/.config
mkdir -p "$XDG_CONFIG_HOME"
mkdir -p "$HOME"/.local/share
mkdir -p "$HOME"/.local/bin

ln -sf "$PWD/rclone/rclone" "$HOME"/.local/bin/rclone
